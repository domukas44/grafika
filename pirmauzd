<!DOCTYPE html>
<html lang="en">
<html>
<head>

<body onload="draw(8);">
<label for="steps">Insert number of steps </label>
<input type="text" id="steps" name="steps">
<button type="button" id="myBtn" onclick="myFunction()">start</button>
<br/>
<br/>
<canvas id="canvas" width="500" height="500"></canvas>

</body>


<script type="application/javascript">

  function myFunction() {

    if(document.getElementById("steps").value!=null)
    draw(document.getElementById("steps").value);
    else
      draw(0);
  }

  function draw(steps) {

    var canvas = document.getElementById('canvas');
    if (canvas.getContext) {
      var ctx = canvas.getContext("2d");
      ctx.clearRect(0, 0, 500, 500);

// Draw border
      ctx.beginPath();
      ctx.moveTo(0,0);
      ctx.lineTo(500,0);
      ctx.lineTo(500,500);
      ctx.lineTo(0,500);
      ctx.closePath();
      ctx.stroke();


      if (steps != null) {
        var first = true;
        /*if(steps ==0)
          drawZ();
        else

         */
        drawF(steps);
      }
    }
    // Recursive draw
    function drawF(steps, color) {
      var firstStep;
      if (steps > 0) {
        steps = steps - 1;
        if (first) {
          firstStep = steps;
          first = false;
        }
        ctx.save();
        ctx.save();
        ctx.save();
        ctx.save();
        ctx.transform(0, 0.5, -0.5, 0, 250, 0);
        if (steps === firstStep) {
          color = "red";
        }
        drawF(steps, color);
        ctx.restore();

        ctx.transform(-0.5, 0, 0, 0.5, 500, 0);
        if (steps === firstStep) {
          color = "green";
        }
        drawF(steps, color);
        ctx.restore();

        ctx.transform(0.25, 0, 0, -0.25, 375, 375);
        if (steps === firstStep) {
          color = "blue";
        }
        drawF(steps, color);
        ctx.restore();
        ctx.transform(0.5, 0, 0, 0.5, 0, 250);
        if (steps === firstStep) {
          color = "black";
        }
        drawF(steps, color);
        ctx.restore();
      } else drawT(color);
    }

    //standart draw
    function drawT(color) {

      ctx.fillStyle = color;
      ctx.beginPath();
      ctx.moveTo(0,0);
      ctx.lineTo(500,0);
      ctx.lineTo(500,375);
      ctx.lineTo(375,375); //
      ctx.lineTo(375,250);
      ctx.lineTo(250,250);
      ctx.lineTo(250,500);
      ctx.lineTo(0,500);
      ctx.fill();
    }

    //draw when there is 0 steps
    function drawZ() {
      ctx.fillStyle = "red";
      ctx.beginPath();
      ctx.moveTo(0,0);
      ctx.lineTo(250,0);
      ctx.lineTo(250,250);
      ctx.lineTo(0,250);
      ctx.lineTo(0,0)
      ctx.fill();
      ctx.closePath()

      ctx.fillStyle = "green";
      ctx.beginPath()
      ctx.moveTo(250, 0)
      ctx.lineTo(500,0);
      ctx.lineTo(500,250);
      ctx.lineTo(250,250);
      ctx.lineTo(250,0);
      ctx.fill();
      ctx.closePath()

      ctx.fillStyle = "blue";
      ctx.beginPath()
      ctx.moveTo(375,250)
      ctx.lineTo(500,250);
      ctx.lineTo(500,375);
      ctx.lineTo(375,375);
      ctx.lineTo(375,250);
      ctx.fill();
      ctx.closePath()

      ctx.fillStyle = "black";
      ctx.beginPath()
      ctx.moveTo(0, 250)
      ctx.lineTo(250,250);
      ctx.lineTo(250,500);
      ctx.lineTo(0,500);
      ctx.lineTo(0,250);
      ctx.fill();
      ctx.closePath()
    }
  }
</script>
</head>
</html>
